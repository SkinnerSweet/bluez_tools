<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>bluez_tools: l2cap/include/l2cap_client.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">bluez_tools
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('l2cap__client_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">l2cap_client.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Module bluez_tools.l2cap.l2cap_client giving the basis to create a generic client using the L2CAP communication protocole.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;l2cap_socket.h&quot;</code><br />
<code>#include &lt;bluetooth/bluetooth.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="bt__device_8h_source.html">bt_device.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for l2cap_client.h:</div>
<div class="dyncontent">
<div class="center"><img src="l2cap__client_8h__incl.png" border="0" usemap="#l2cap_2include_2l2cap__client_8h" alt=""/></div>
<map name="l2cap_2include_2l2cap__client_8h" id="l2cap_2include_2l2cap__client_8h">
<area shape="rect" id="node2" href="l2cap__socket_8h_source.html" title="l2cap_socket.h" alt="" coords="144,95,255,121"/><area shape="rect" id="node8" href="bt__device_8h.html" title="Module bluez_tools.bt.bt_device defining the basics of manipulating BT devices. " alt="" coords="32,169,121,196"/><area shape="rect" id="node6" href="list_8h_source.html" title="list.h" alt="" coords="394,169,445,196"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="l2cap__client_8h__dep__incl.png" border="0" usemap="#l2cap_2include_2l2cap__client_8hdep" alt=""/></div>
<map name="l2cap_2include_2l2cap__client_8hdep" id="l2cap_2include_2l2cap__client_8hdep">
<area shape="rect" id="node2" href="l2cap__client_8c_source.html" title="l2cap/l2cap_client.c" alt="" coords="5,95,143,121"/></map>
</div>
</div>
<p><a href="l2cap__client_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structl2cap__client__t.html">l2cap_client_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8b67454b05e1a47cf33c435aa85ee90c"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="l2cap__client_8h.html#a8b67454b05e1a47cf33c435aa85ee90c">l2cap_client_create</a> (<a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> *client, <a class="el" href="bt__device_8h.html#ab1e8dbb4daef6b7fcc15ded741d835f2">bt_address_t</a> *server_add, uint16_t port, uint16_t buffer_length, void(*treat_buffer_func)(<a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> client), void(*send_request_func)(<a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> client, uint8_t req_type))</td></tr>
<tr class="memdesc:a8b67454b05e1a47cf33c435aa85ee90c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new L2CAP client.  <a href="#a8b67454b05e1a47cf33c435aa85ee90c">More...</a><br /></td></tr>
<tr class="separator:a8b67454b05e1a47cf33c435aa85ee90c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7756398176ea095d284ef8f1e40e5fea"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="l2cap__client_8h.html#a7756398176ea095d284ef8f1e40e5fea">l2cap_client_connect</a> (<a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> *client)</td></tr>
<tr class="memdesc:a7756398176ea095d284ef8f1e40e5fea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects a previously initialized client to its server.  <a href="#a7756398176ea095d284ef8f1e40e5fea">More...</a><br /></td></tr>
<tr class="separator:a7756398176ea095d284ef8f1e40e5fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f41fc895f2a662eca3678690fc749a2"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="l2cap__client_8h.html#a3f41fc895f2a662eca3678690fc749a2">l2cap_client_send</a> (<a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> *client, int16_t timeout, uint8_t req_type)</td></tr>
<tr class="memdesc:a3f41fc895f2a662eca3678690fc749a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a request to the server. The client must have been previously successfully connected to said server. Once the request has been sent, the timeout value is used to wait for the server to answer the request. If the answer arrives before the timeout is reached, the client then calls its.  <a href="#a3f41fc895f2a662eca3678690fc749a2">More...</a><br /></td></tr>
<tr class="separator:a3f41fc895f2a662eca3678690fc749a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65a552d66d1796f4cf37743f5d5ba129"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="l2cap__client_8h.html#a65a552d66d1796f4cf37743f5d5ba129">l2cap_client_close</a> (<a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> *client)</td></tr>
<tr class="memdesc:a65a552d66d1796f4cf37743f5d5ba129"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a client. WARNING: this function DOES NOT terminate the connection with the server, it only frees the memory taken by the client and closes its socket. It may be something to work on ? Moreover this function does not perform any kind of checking on the given client. Use with caution.  <a href="#a65a552d66d1796f4cf37743f5d5ba129">More...</a><br /></td></tr>
<tr class="separator:a65a552d66d1796f4cf37743f5d5ba129"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Module bluez_tools.l2cap.l2cap_client giving the basis to create a generic client using the L2CAP communication protocole. </p>
<dl class="section author"><dt>Author</dt><dd>Thomas Bertauld </dd></dl>
<dl class="section date"><dt>Date</dt><dd>03/03/2016 </dd></dl>

<p>Definition in file <a class="el" href="l2cap__client_8h_source.html">l2cap_client.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a65a552d66d1796f4cf37743f5d5ba129"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void l2cap_client_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys a client. WARNING: this function DOES NOT terminate the connection with the server, it only frees the memory taken by the client and closes its socket. It may be something to work on ? Moreover this function does not perform any kind of checking on the given client. Use with caution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>the client to destroy. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="l2cap__client_8c_source.html#l00173">173</a> of file <a class="el" href="l2cap__client_8c_source.html">l2cap_client.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7756398176ea095d284ef8f1e40e5fea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t l2cap_client_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connects a previously initialized client to its server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>to connect. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, a value &lt; 0 otherwise. Note that in case of success, the field client.connected will also be set to 1. </dd></dl>

<p>Definition at line <a class="el" href="l2cap__client_8c_source.html#l00097">97</a> of file <a class="el" href="l2cap__client_8c_source.html">l2cap_client.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8b67454b05e1a47cf33c435aa85ee90c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t l2cap_client_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bt__device_8h.html#ab1e8dbb4daef6b7fcc15ded741d835f2">bt_address_t</a> *&#160;</td>
          <td class="paramname"><em>server_add</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>buffer_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> client)&#160;</td>
          <td class="paramname"><em>treat_buffer_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> client, uint8_t req_type)&#160;</td>
          <td class="paramname"><em>send_request_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new L2CAP client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>reference on the client to initialize. </td></tr>
    <tr><td class="paramname">server_add</td><td>address of the server on which the client is to be later connected. </td></tr>
    <tr><td class="paramname">port</td><td>server's port on which to connect later. </td></tr>
    <tr><td class="paramname">buffer_length</td><td>desired length for the receiving buffer. This buffer will handle the server's answers. </td></tr>
    <tr><td class="paramname">treat_buffer_func</td><td>function to use when a packet is received by the client. If NULL, a default function, simply displaying the received packet on the standard output, will be used. </td></tr>
    <tr><td class="paramname">send_request_func</td><td>function to use to send request to the server. If NULL, a default function, simply sending the string "Request echo.", will be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, a value &lt; 0 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="l2cap__client_8c_source.html#l00057">57</a> of file <a class="el" href="l2cap__client_8c_source.html">l2cap_client.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3f41fc895f2a662eca3678690fc749a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t l2cap_client_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structl2cap__client__t.html">l2cap_client_t</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>req_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a request to the server. The client must have been previously successfully connected to said server. Once the request has been sent, the timeout value is used to wait for the server to answer the request. If the answer arrives before the timeout is reached, the client then calls its. </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;treat_buffer_func </div>
</div><!-- fragment --><p> function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>client willing to send a request. </td></tr>
    <tr><td class="paramname">timeout</td><td>timeout for the server's answer to arrive. </td></tr>
    <tr><td class="paramname">req_type</td><td>type of the request to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in case of success, a value &lt; 0 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="l2cap__client_8c_source.html#l00109">109</a> of file <a class="el" href="l2cap__client_8c_source.html">l2cap_client.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_95c2a14882702250e432d2720c688283.html">l2cap</a></li><li class="navelem"><a class="el" href="dir_c740a2e24fd821aaffcc191beeabbbc9.html">include</a></li><li class="navelem"><a class="el" href="l2cap__client_8h.html">l2cap_client.h</a></li>
    <li class="footer">Generated on Mon Apr 4 2016 15:05:16 for bluez_tools by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
